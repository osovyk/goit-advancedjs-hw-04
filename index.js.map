{"version":3,"file":"index.js","sources":["../src/js/handle-error.js","../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nfunction handleError(message) {\n  iziToast.show({\n    message,\n    position: 'topRight',\n    timeout: 5000,\n    backgroundColor: '#EF4040',\n    messageColor: '#FAFAFB',\n    iconUrl: './assets/icons/close-icon.svg',\n    closeOnEscape: true,\n    closeOnClick: true,\n    maxWidth: '432px',\n  });\n}\n\nexport { handleError };\n","import { handleError } from './handle-error.js';\nimport axios from 'axios';\n\nconst API_KEY = '49367639-b33ebacd3c1171708280ede99';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst PARAMS = {\n  key: API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n  per_page: 15,\n};\n\nasync function fetchImages(query, page = 1) {\n  const loader = document.getElementById('loader');\n  loader.style.display = 'flex';\n\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: { ...PARAMS, q: query, page },\n    });\n    return response.data;\n  } catch (error) {\n    handleError('Failed to fetch images');\n    throw error;\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n\nexport { fetchImages };\n","import { handleError } from './handle-error.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = null;\n\nfunction renderImages({ total, hits }, options = { append: false }) {\n  const gallery = document.getElementById('gallery');\n\n  if (!options.append) {\n    gallery.innerHTML = '';\n  }\n\n  if (total === 0) {\n    handleError('Sorry, there are no images matching your search query. Please try again!');\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n\n  hits.forEach(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }, index) => {\n    const stats = [\n      { title: 'Likes', value: likes },\n      { title: 'Views', value: views },\n      { title: 'Comments', value: comments },\n      { title: 'Downloads', value: downloads },\n    ];\n\n    const infoHTML = stats\n      .map(({ title, value }) => `\n        <div class=\"info-block\">\n          <span class=\"info-title\">${title}</span>\n          <span class=\"info-value\">${value}</span>\n        </div>\n      `)\n      .join('');\n\n    const item = document.createElement('li');\n    item.classList.add('gallery-item');\n\n    item.innerHTML = `\n      <a href=\"${largeImageURL}\" class=\"gallery-link\">\n        <div class=\"image-wrapper\">\n          <img\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n            class=\"gallery-image hidden\"\n          />\n        </div>\n      </a>\n      <div class=\"gallery-info\">\n        ${infoHTML}\n      </div>\n    `;\n\n    const img = item.querySelector('.gallery-image');\n    img.onload = () => {\n      img.classList.remove('hidden');\n    };\n\n    setTimeout(() => {\n      item.classList.add('fade-in');\n    }, index * 100);\n\n    fragment.appendChild(item);\n  });\n\n  gallery.appendChild(fragment);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n      overlayOpacity: 0.8,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport { renderImages };\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-function.js';\nimport { handleError } from './js/handle-error.js';\n\nlet searchQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\n\nconst searchForm = document.getElementById('searchForm');\nconst loadMoreBtn = document.getElementById('loadMoreBtn');\nconst gallery = document.getElementById('gallery');\n\nsearchForm.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(e) {\n  e.preventDefault();\n  searchQuery = document.getElementById('searchInput').value.trim();\n\n  if (searchQuery === '') {\n    return;\n  }\n\n  currentPage = 1;\n  gallery.innerHTML = '';\n  loadMoreBtn.style.display = 'none';\n\n  try {\n    const data = await fetchImages(searchQuery, currentPage);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0) {\n      handleError('Sorry, there are no images matching your search query. Please try again!');\n      return;\n    }\n\n    renderImages(data, { append: false });\n\n    if (totalHits <= 15) {\n      loadMoreBtn.style.display = 'none';\n    }\n    else if (currentPage * 15 < totalHits) {\n      loadMoreBtn.style.display = 'block';\n      loadMoreBtn.disabled = false;\n      loadMoreBtn.textContent = \"Load more...\";\n    } else {\n      loadMoreBtn.style.display = 'block';\n      loadMoreBtn.disabled = true;\n      loadMoreBtn.textContent = \"We're sorry, but you've reached the end of search results.\";\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function onLoadMore() {\n  currentPage += 1;\n\n  try {\n    const data = await fetchImages(searchQuery, currentPage);\n    renderImages(data, { append: true });\n\n    const firstCard = document.querySelector('.gallery-item');\n    if (firstCard) {\n      const { height: cardHeight } = firstCard.getBoundingClientRect();\n      const gap = 24;\n      window.scrollBy({\n        top: cardHeight * 2 + gap,\n        behavior: 'smooth',\n      });\n    }\n\n    if (currentPage * 15 >= totalHits) {\n      loadMoreBtn.disabled = true;\n      loadMoreBtn.textContent = \"We're sorry, but you've reached the end of search results.\";\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n"],"names":["handleError","message","iziToast","API_KEY","BASE_URL","PARAMS","fetchImages","query","page","loader","axios","error","lightbox","renderImages","total","hits","options","gallery","fragment","webformatURL","largeImageURL","tags","likes","views","comments","downloads","index","infoHTML","title","value","item","img","SimpleLightbox","searchQuery","currentPage","totalHits","searchForm","loadMoreBtn","onSearch","onLoadMore","e","data","firstCard","cardHeight"],"mappings":"owBAGA,SAASA,EAAYC,EAAS,CAC5BC,EAAS,KAAK,CACZ,QAAAD,EACA,SAAU,WACV,QAAS,IACT,gBAAiB,UACjB,aAAc,UACd,QAAS,gCACT,cAAe,GACf,aAAc,GACd,SAAU,OACd,CAAG,CACH,CCZA,MAAME,EAAU,qCACVC,EAAW,2BAEXC,EAAS,CACb,IAAKF,EACL,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,EACZ,EAEA,eAAeG,EAAYC,EAAOC,EAAO,EAAG,CAC1C,MAAMC,EAAS,SAAS,eAAe,QAAQ,EAC/CA,EAAO,MAAM,QAAU,OAEvB,GAAI,CAIF,OAHiB,MAAMC,EAAM,IAAIN,EAAU,CACzC,OAAQ,CAAE,GAAGC,EAAQ,EAAGE,EAAO,KAAAC,CAAM,CAC3C,CAAK,GACe,IACjB,OAAQG,EAAO,CACd,MAAAX,EAAY,wBAAwB,EAC9BW,CACV,QAAY,CACRF,EAAO,MAAM,QAAU,MAC3B,CACA,CCzBA,IAAIG,EAAW,KAEf,SAASC,EAAa,CAAE,MAAAC,EAAO,KAAAC,CAAI,EAAIC,EAAU,CAAE,OAAQ,IAAS,CAClE,MAAMC,EAAU,SAAS,eAAe,SAAS,EAMjD,GAJKD,EAAQ,SACXC,EAAQ,UAAY,IAGlBH,IAAU,EAAG,CACfd,EAAY,0EAA0E,EACtF,MACJ,CAEE,MAAMkB,EAAW,SAAS,uBAAwB,EAElDH,EAAK,QAAQ,CAAC,CAAE,aAAAI,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,EAAIC,IAAU,CAQhG,MAAMC,EAPQ,CACZ,CAAE,MAAO,QAAS,MAAOL,CAAO,EAChC,CAAE,MAAO,QAAS,MAAOC,CAAO,EAChC,CAAE,MAAO,WAAY,MAAOC,CAAU,EACtC,CAAE,MAAO,YAAa,MAAOC,CAAW,CACzC,EAGE,IAAI,CAAC,CAAE,MAAAG,EAAO,MAAAC,KAAY;AAAA;AAAA,qCAEID,CAAK;AAAA,qCACLC,CAAK;AAAA;AAAA,OAEnC,EACA,KAAK,EAAE,EAEJC,EAAO,SAAS,cAAc,IAAI,EACxCA,EAAK,UAAU,IAAI,cAAc,EAEjCA,EAAK,UAAY;AAAA,iBACJV,CAAa;AAAA;AAAA;AAAA,mBAGXD,CAAY;AAAA,mBACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAMbM,CAAQ;AAAA;AAAA,MAId,MAAMI,EAAMD,EAAK,cAAc,gBAAgB,EAC/CC,EAAI,OAAS,IAAM,CACjBA,EAAI,UAAU,OAAO,QAAQ,CAC9B,EAED,WAAW,IAAM,CACfD,EAAK,UAAU,IAAI,SAAS,CAClC,EAAOJ,EAAQ,GAAG,EAEdR,EAAS,YAAYY,CAAI,CAC7B,CAAG,EAEDb,EAAQ,YAAYC,CAAQ,EAEvBN,EAOHA,EAAS,QAAS,EANlBA,EAAW,IAAIoB,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,IACd,eAAgB,EACtB,CAAK,CAIL,CC1EA,IAAIC,EAAc,GACdC,EAAc,EACdC,EAAY,EAEhB,MAAMC,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAc,SAAS,eAAe,aAAa,EACnDpB,EAAU,SAAS,eAAe,SAAS,EAEjDmB,EAAW,iBAAiB,SAAUE,CAAQ,EAC9CD,EAAY,iBAAiB,QAASE,CAAU,EAEhD,eAAeD,EAASE,EAAG,CAIzB,GAHAA,EAAE,eAAgB,EAClBP,EAAc,SAAS,eAAe,aAAa,EAAE,MAAM,KAAM,EAE7DA,IAAgB,GAIpB,CAAAC,EAAc,EACdjB,EAAQ,UAAY,GACpBoB,EAAY,MAAM,QAAU,OAE5B,GAAI,CACF,MAAMI,EAAO,MAAMnC,EAAY2B,EAAaC,CAAW,EAGvD,GAFAC,EAAYM,EAAK,UAEbA,EAAK,KAAK,SAAW,EAAG,CAC1BzC,EAAY,0EAA0E,EACtF,MACN,CAEIa,EAAa4B,EAAM,CAAE,OAAQ,EAAK,CAAE,EAEhCN,GAAa,GACfE,EAAY,MAAM,QAAU,OAErBH,EAAc,GAAKC,GAC1BE,EAAY,MAAM,QAAU,QAC5BA,EAAY,SAAW,GACvBA,EAAY,YAAc,iBAE1BA,EAAY,MAAM,QAAU,QAC5BA,EAAY,SAAW,GACvBA,EAAY,YAAc,6DAE7B,OAAQ1B,EAAO,CACd,QAAQ,MAAMA,CAAK,CACvB,EACA,CAEA,eAAe4B,GAAa,CAC1BL,GAAe,EAEf,GAAI,CACF,MAAMO,EAAO,MAAMnC,EAAY2B,EAAaC,CAAW,EACvDrB,EAAa4B,EAAM,CAAE,OAAQ,EAAI,CAAE,EAEnC,MAAMC,EAAY,SAAS,cAAc,eAAe,EACxD,GAAIA,EAAW,CACb,KAAM,CAAE,OAAQC,GAAeD,EAAU,sBAAuB,EAEhE,OAAO,SAAS,CACd,IAAKC,EAAa,EAFR,GAGV,SAAU,QAClB,CAAO,CACP,CAEQT,EAAc,IAAMC,IACtBE,EAAY,SAAW,GACvBA,EAAY,YAAc,6DAE7B,OAAQ1B,EAAO,CACd,QAAQ,MAAMA,CAAK,CACvB,CACA"}